= 
:allow-uri-read: 


Para confirmar a configuração correta, é necessário ativar o par de HA. Você também deve verificar se o node3 e o node4 podem acessar o storage um do outro e se nenhum deles possui LIFs de dados pertencentes a outros nós no cluster. Além disso, você deve confirmar que o node3 possui agregados do node1 e que o node4 possui agregados do node2 e que os volumes para ambos os nós estão online.

.Passos
. Após as verificações posteriores do node2, o failover de storage e o par de HA de cluster para o cluster node2 são ativados. Quando a operação é concluída, ambos os nós mostram como concluído e o sistema executa algumas operações de limpeza.
. Verifique se o failover de armazenamento está ativado:
+
`storage failover show`

+
O exemplo a seguir mostra a saída do comando quando o failover de armazenamento está ativado:

+
....
cluster::> storage failover show
                  Takeover
Node     Partner  Possible   State Description
-------- -----    -------    ------------------
node3    node4    true       Connected to node4
node4    node3    true       Connected to node3
....
. Verifique se node3 e node4 pertencem ao mesmo cluster usando o seguinte comando e examinando a saída:
+
`cluster show`

. Verifique se node3 e node4 podem acessar o armazenamento um do outro usando o seguinte comando e examinando a saída:
+
`storage failover show -fields local-missing-disks, partner-missing-disks`

. Verifique se nem o node3 nem o node4 possuem LIFs de dados de propriedade própria por outros nós no cluster usando o seguinte comando e examinando a saída:
+
`network interface show`

+
Se nem o node3 ou o node4 possuírem LIFs de dados de propriedade própria de outros nós no cluster, reverta os LIFs de dados para o proprietário de sua casa:

+
`network interface revert`

. Verifique se o node3 possui os agregados do node1 e se o node4 possui os agregados do node2:
+
`storage aggregate show -owner-name <node3>`

+
`storage aggregate show -owner-name <node4>`

. Determine se algum volume está offline:
+
`volume show -node <node3> -state offline`

+
`volume show -node <node4> -state offline`

. Se algum volume estiver offline, compare-o com a lista de volumes offline que você capturou link:prepare_nodes_for_upgrade.html["Prepare os nós para atualização"]na seção e coloque online qualquer um dos volumes offline, conforme necessário, usando o seguinte comando, uma vez para cada volume:
+
`volume online -vserver <vserver_name> -volume <volume_name>`

. Instale novas licenças para os novos nós usando o seguinte comando para cada nó:
+
`system license add -license-code <license_code,license_code,license_code…>`

+
O parâmetro license-code aceita uma lista de 28 teclas de carateres alfabéticos maiúsculas. Você pode adicionar uma licença de cada vez, ou pode adicionar várias licenças de uma vez, separando cada chave de licença por uma vírgula.

. Remova todas as licenças antigas dos nós originais usando um dos seguintes comandos:
+
`system license clean-up -unused -expired`

+
`system license delete -serial-number <node_serial_number> -package <licensable_package>`

+
--
** Eliminar todas as licenças expiradas:
+
`system license clean-up -expired`

** Eliminar todas as licenças não utilizadas:
+
`system license clean-up -unused`

** Exclua uma licença específica de um cluster usando os seguintes comandos nos nós:
+
`system license delete -serial-number <node1_serial_number> -package *`

+
`system license delete -serial-number <node2_serial_number> -package *`



--
+
É apresentada a seguinte saída:

+
....
Warning: The following licenses will be removed:
<list of each installed package>
Do you want to continue? {y|n}: y
....
+
Digite `y` para remover todos os pacotes.

. Verifique se as licenças estão corretamente instaladas usando o seguinte comando e examinando a saída:
+
`system license show`

+
Pode comparar a saída com a saída que captou na secção link:prepare_nodes_for_upgrade.html["Prepare os nós para atualização"].

. [[unset_maxwait_system_commands]]Se unidades de criptografia automática estiverem sendo usadas na configuração e você tiver definido o `kmip.init.maxwait` variável para `off` (por exemplo, emlink:install_boot_node4.html#auto_install4_step22["Instale e inicialize o nó 4, Etapa 22"] ), você deve remover a variável:
+
`set diag; systemshell -node _node_name_ -command sudo kenv -u -p kmip.init.maxwait`


